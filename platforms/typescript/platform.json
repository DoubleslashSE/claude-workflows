{
  "$schema": "../platform-schema.json",
  "name": "typescript",
  "displayName": "TypeScript with Next.js",
  "version": "1.0.0",

  "detection": {
    "markers": ["package.json", "tsconfig.json"],
    "matchMode": "all",
    "priority": 90,
    "description": "Detected by package.json AND tsconfig.json"
  },

  "commands": {
    "build": "npm run build",
    "test": "npm test",
    "testSingle": "npm test -- --testNamePattern=\"{testName}\"",
    "testProject": "npm test -- --testPathPattern=\"{project}\"",
    "testWatch": "npm test -- --watch",
    "lint": "npm run lint",
    "format": "npm run format",
    "typecheck": "tsc --noEmit",
    "coverage": "npm test -- --coverage",
    "install": "npm install",
    "clean": "rm -rf node_modules .next dist",
    "dev": "npm run dev",
    "start": "npm start"
  },

  "conventions": {
    "testNaming": "should {expectedBehavior} when {scenario}",
    "testFilePattern": "**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx",
    "sourceExtensions": [".ts", ".tsx", ".js", ".jsx"],
    "configFiles": ["package.json", "tsconfig.json", "next.config.js", ".eslintrc.*"],
    "entryPoints": ["src/index.ts", "src/app/page.tsx", "pages/index.tsx"],
    "commitFormat": "type: description",
    "branchFormat": "feature/{storyId}-{description}",
    "componentNaming": "PascalCase",
    "hookNaming": "use{Name}"
  },

  "qualityGates": {
    "coverageThresholds": {
      "S": 70,
      "M": 80,
      "L": 85,
      "XL": 90
    },
    "requiredChecks": ["typecheck", "lint", "build", "test"]
  },

  "patterns": {
    "component": "src/components/{Name}/{Name}.tsx",
    "componentTest": "src/components/{Name}/{Name}.test.tsx",
    "componentStyles": "src/components/{Name}/{Name}.module.css",
    "page": "src/app/{path}/page.tsx",
    "layout": "src/app/{path}/layout.tsx",
    "apiRoute": "src/app/api/{path}/route.ts",
    "hook": "src/hooks/use{Name}.ts",
    "hookTest": "src/hooks/use{Name}.test.ts",
    "util": "src/utils/{name}.ts",
    "utilTest": "src/utils/{name}.test.ts",
    "type": "src/types/{name}.ts",
    "service": "src/services/{Name}Service.ts",
    "serviceTest": "src/services/{Name}Service.test.ts",
    "context": "src/contexts/{Name}Context.tsx",
    "store": "src/store/{name}Slice.ts"
  },

  "antiPatterns": [
    {
      "name": "AnyType",
      "pattern": ":\\s*any\\b",
      "reason": "Avoid using 'any' type - use proper typing or 'unknown'"
    },
    {
      "name": "ConsoleLog",
      "pattern": "console\\.log\\(",
      "reason": "Remove console.log statements in production code"
    },
    {
      "name": "DangerouslySetInnerHTML",
      "pattern": "dangerouslySetInnerHTML",
      "reason": "Potential XSS vulnerability - use sanitization if necessary"
    },
    {
      "name": "UseEffectMissingDeps",
      "pattern": "useEffect\\([^)]+,\\s*\\[\\s*\\]\\s*\\)",
      "reason": "Empty dependency array may miss necessary dependencies"
    }
  ],

  "skills": [
    "typescript-patterns",
    "typescript-best-practices",
    "react-best-practices"
  ],

  "projectStructure": {
    "description": "Next.js App Router with Feature-based organization",
    "layers": [
      {
        "name": "App",
        "path": "src/app",
        "dependencies": ["components", "hooks", "services"],
        "contains": ["pages", "layouts", "api routes", "loading states"]
      },
      {
        "name": "Components",
        "path": "src/components",
        "dependencies": ["hooks", "types", "utils"],
        "contains": ["UI components", "feature components"]
      },
      {
        "name": "Hooks",
        "path": "src/hooks",
        "dependencies": ["services", "types"],
        "contains": ["custom hooks", "data fetching"]
      },
      {
        "name": "Services",
        "path": "src/services",
        "dependencies": ["types"],
        "contains": ["API clients", "business logic"]
      },
      {
        "name": "Types",
        "path": "src/types",
        "dependencies": [],
        "contains": ["TypeScript interfaces", "type definitions"]
      },
      {
        "name": "Utils",
        "path": "src/utils",
        "dependencies": ["types"],
        "contains": ["helper functions", "constants"]
      }
    ]
  },

  "frameworks": {
    "testing": "jest",
    "testingLibrary": "@testing-library/react",
    "stateManagement": ["zustand", "react-query"],
    "styling": ["tailwindcss", "css-modules"]
  }
}
